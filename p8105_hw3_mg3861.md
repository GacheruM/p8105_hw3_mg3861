Homework 3 - Visualization
================

Problem 1
=========

First, do some data cleaning by

1.  Using appropriate variable names

2.  Filtering the data based on the “Overall Health” topic

3.  Including only responses from “Excellent” to “Poor”

4.  Organizing responses as a factor taking levels ordered from “Excellent” to “Poor”

``` r
library(p8105.datasets)

brfss = brfss_smart2010%>%
  janitor::clean_names()%>%
  filter(topic == "Overall Health", 
         response %in% c("Excellent", "Very good", "Good", "Fair", "Poor"))%>%
  mutate(response = factor(response, levels = c("Excellent", "Very good", "Good", "Fair", "Poor")))
```

After the data cleaning, begin some exploration:

1.  In 2002, we find that Connecticut, Florida, and North Carolina had observations at 7 different locations. Pennsylvania had observations from the most locations (10), while 13 states had observations from only 1 location.

``` r
filter(brfss, year == 2002)%>%
  distinct(locationabbr, locationdesc)%>%
  count(locationabbr)%>%
  filter(n == 7)%>%
  pull(locationabbr)
```

    ## [1] "CT" "FL" "NC"

1.  Make a “spaghetti plot” that shows the number of observations in each state from 2002 to 2010.

``` r
brfss%>%
  group_by(year)%>%
  distinct(locationabbr, locationdesc)%>%
  count(locationabbr)%>%
  ggplot(aes(x = year, y = n, color = locationabbr)) +
  geom_point() +
  geom_line() +
  labs(
    title = "Number of Observations in each state from 2002 to 2010",
    x = "Year",
    y = "Number of Observations"
  )+
  viridis::scale_color_viridis(
    discrete = TRUE
  ) + 
  theme(legend.position="none")
```

<img src="p8105_hw3_mg3861_files/figure-markdown_github/unnamed-chunk-3-1.png" width="90%" />

1.  Make a table showing, for the years 2002, 2006, and 2010, the mean and standard deviation of the proportion of “Excellent” responses across locations in NY State.

There is a decrease in mean proportion of "Excellent" responses from 2002 to 2006 and a slight increase in mean proportion from 2006 and 2010. Furthermoe, the standard deviation of the proportion of "Excellent" responses has decreased across the years. A hypothesis test would be needed to evaluate whether the changes are truly significant.

``` r
brfss%>%
  filter(locationabbr == "NY", year %in% c(2002, 2006, 2010))%>%
  select(year, locationabbr, locationdesc, response, data_value)%>%
  spread(key = response, value = data_value)%>%
  group_by(year)%>%
  summarize(Mean = mean(Excellent), SD = sd(Excellent))
```

    ## # A tibble: 3 x 3
    ##    year  Mean    SD
    ##   <int> <dbl> <dbl>
    ## 1  2002  24.0  4.49
    ## 2  2006  22.5  4.00
    ## 3  2010  22.7  3.57

1.  For each year and state, compute the average proportion in each response category. Then make a five-panel plot that shows, for each response category separately, the distribution of these state-level averages over time.

On average, the "very good" category has the highest proportions in comparison to the other response groups. The "poor" response category has the lower proportions, on average. There appears to be no overlap between "excellent" and "poor" categories, "fair" and "good" categories, "fair" and "very good" categories, "good" and "poor" categories, as well as "poor" and "very good" categories. Once again, hypothesis testing would be most appropriate to determine whether the differences in the response groups are truly significant.

``` r
average = brfss%>%
  select(year, locationabbr, locationdesc, response, data_value)%>%
  spread(key = response, value = data_value)%>%
  janitor::clean_names()%>%
  group_by(year, locationabbr)%>%
  summarize(Excellent = mean(excellent),
            Very_good = mean(very_good),
            Good = mean(good),
            Fair = mean(fair),
            Poor = mean(poor)
            )%>%
  gather(key = response, value = proportion, Excellent:Poor)

average%>%
  ggplot(aes(x = year, y = proportion, color = locationabbr)) +
  geom_line()+
  facet_grid(~response ) +
  viridis::scale_color_viridis(
    discrete = TRUE
  ) + 
  theme(legend.position="none",
        axis.text.x = element_text(angle = 90, hjust = 0))
```

<img src="p8105_hw3_mg3861_files/figure-markdown_github/unnamed-chunk-5-1.png" width="90%" />
